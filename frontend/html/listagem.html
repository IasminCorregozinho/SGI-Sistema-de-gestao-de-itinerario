<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SGI :: Listagem de Ativos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- CSS Separado -->
    <link rel="stylesheet" href="../css/listagem.css?v=2" />
</head>

<body>
    <div class="dashboard-layout">
        <aside class="sidebar" id="sidebar">
            <button id="sidebarToggle" title="Recolher Menu">
                <i class="fa-solid fa-chevron-left"></i>
            </button>
            <div class="logo-area" style="text-align: center; margin-bottom: 2rem; margin-top: 1.5rem">
                <a href="dashboard.html" style="display: inline-block; transition: transform 0.2s">
                    <img src="../images/logo_ifg.png" alt="Logo IFG - Voltar ao Dashboard" style="
                width: 100%;
                max-width: 160px;
                height: auto;
                border-radius: 12px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
                background-color: white;
                padding: 10px;
              " />
                </a>
            </div>

            <nav>
                <a href="dashboard.html" class="menu-item">
                    <i class="fa-solid fa-chart-line"></i> <span>Dashboard</span>
                </a>
                <a href="#" id="menuCadastrarAtivo" class="menu-item">
                    <i class="fa-solid fa-plus"></i> <span>Cadastrar Ativo</span>
                </a>
                <a href="listagem.html" class="menu-item" style="background-color: var(--ifg-green-dark)">
                    <i class="fa-solid fa-list"></i> <span>Listagem de Ativos</span>
                </a>

                <a href="#" class="menu-item" style="margin-top: auto" id="btnSair">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                    <span>Sair</span>
                </a>
            </nav>
        </aside>

        <main class="content">
            <header>
                <div>
                    <h1>Listagem de Ativos</h1>
                    <p>Gerenciamento completo do inventário</p>
                </div>
                <div class="actions">
                    <button id="btnExportar" class="btn-primary">
                        <i class="fa-solid fa-file-csv"></i> Exportar Relatório
                    </button>
                    <a href="dashboard.html" class="btn-primary">
                        <i class="fa-solid fa-house"></i> Dashboard
                    </a>
                </div>
            </header>

            <!-- Mensagens do Sistema -->
            <div id="divMensagemSistema" style="
              display: none;
              padding: 8px 16px;
              margin: 10px auto;
              border-radius: 20px;
              text-align: center;
              font-weight: 500;
              width: fit-content;
              max-width: 80%;
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            "></div>

            <!-- Filtros de Busca -->
            <section class="filter-section">
                <h3><i class="fa-solid fa-filter"></i> Filtros de Busca</h3>
                <br />
                <div class="filter-grid">
                    <div class="form-group">
                        <label>Patrimônio</label>
                        <input type="text" id="filtro_patrimonio" placeholder="Buscar..." />
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="filtro_status">
                            <option value="">Todos</option>
                            <!-- Options carregadas via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Localização</label>
                        <select id="filtro_localizacao">
                            <option value="">Todas</option>
                            <!-- Options carregadas via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Responsável</label>
                        <select id="filtro_responsavel">
                            <option value="">Todos</option>
                            <!-- Options carregadas via JS -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Marca/Modelo</label>
                        <input type="text" id="filtro_marca" placeholder="Buscar..." />
                    </div>
                </div>
            </section>

            <!-- Tabela de Resultados -->
            <div id="topScrollContainer" class="table-container top-scroll" style="
            margin-bottom: 0;
            min-height: 20px;
            border-bottom: none;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
          ">
                <div id="topScrollContent" style="height: 1px"></div>
            </div>
            <section class="table-container" id="mainTableContainer"
                style="border-top-left-radius: 0; border-top-right-radius: 0">
                <table id="tabelaAtivos">
                    <thead>
                        <tr>
                            <th>Patrimônio</th>
                            <th>Tipo</th>
                            <th>Marca/Modelo</th>
                            <th>Nº Série</th>
                            <th>Tipo Arm.</th>
                            <th>Capacidade</th>
                            <th>Valor Manutenção</th>
                            <th>Status</th>
                            <th>Localização</th>
                            <th>Responsável</th>
                            <th>Observação</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Preenchido via JS -->
                    </tbody>
                </table>
            </section>

            <!-- Paginação -->
            <div class="pagination">
                <span id="infoPaginacao">Página 1 de 1</span>
                <button id="btnAnterior" disabled>Anterior</button>
                <button id="btnProximo" disabled>Próxima</button>
            </div>
        </main>
    </div>

    <!-- Modal de Histórico -->
    <div id="modalHistorico" class="modal-overlay" style="display: none">
        <div class="modal-box" style="max-width: 900px; width: fit-content; overflow: hidden">
            <span class="close-btn" id="fecharModalHistorico">&times;</span>
            <h2 id="tituloHistorico">Histórico do Ativo</h2>
            <p id="subtituloHistorico" style="
            text-align: center;
            color: var(--text-secondary);
            margin-top: -20px;
            margin-bottom: 20px;
            font-size: 1.1rem;
          "></p>

            <div style="max-height: 70vh; overflow-y: auto; width: 100%; padding-bottom: 24px;">
                <table
                    style="width: auto; min-width: 50%; margin: 0 auto; border-collapse: separate; border-spacing: 0;">
                    <thead style="position: sticky; top: 0; z-index: 10;">
                        <tr style="background: #f8fafc; text-align: center; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                            <th
                                style="padding: 12px 14px; border-bottom: 2px solid #e2e8f0; color: #475569; width: 1%; white-space: nowrap; font-size: 13px; background: #f8fafc;">
                                Data
                            </th>
                            <th
                                style="padding: 12px 14px; border-bottom: 2px solid #e2e8f0; color: #475569; text-align: center; width: 1%; white-space: nowrap; font-size: 13px; background: #f8fafc;">
                                Ação
                            </th>
                            <th
                                style="padding: 12px 14px; border-bottom: 2px solid #e2e8f0; color: #475569; width: 1%; white-space: nowrap; font-size: 13px; text-align: center; background: #f8fafc;">
                                Responsável
                            </th>
                            <th
                                style="padding: 12px 14px; border-bottom: 2px solid #e2e8f0; color: #475569; text-align: center; font-size: 13px; background: #f8fafc;">
                                Detalhes
                            </th>
                        </tr>
                    </thead>
                    <tbody id="tbodyHistorico"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/modal-ativo.js"></script>
    <script src="../js/listagem.js"></script>
</body>

</html>